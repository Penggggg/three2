<!--container/goods-detail-bar/index.wxml-->
<view class="con-gbs">

    <!-- 按钮栏 -->
    <view
        class="gbs-btn-bar"
    >   
        <!-- 商城、行程、购物车按钮 -->
        <view
            class="gbs-btn-item"
            wx:for="{{ btnList }}"
            wx:key="{{ index }}"
        >
            <image
                mode="aspectFill"
                class="gbs-btn-item-img"
                src="{{ item.src }}"
            />
            <view class="gbs-btn-item-text">{{ item.label }}</view>
        </view>

        <!-- 下架、售罄、购买按钮 -->
        <view
            class="gbs-btn-special"
        >
            <!-- 已下架 -->
            <view
                wx:if="{{ detail._id && !detail.visiable }}"
                class="gbs-btn-special-item grey"
            >   
                已下架
            </view>
            <!-- 已售罄 -->
            <view
                wx:elif="{{ detail._id && detail.visiable && !hasStock }}"
                class="gbs-btn-special-item grey"
            >   
                已售罄
            </view>
            <!-- 加入购物车 -->
            <!-- 立即购买 -->
            <view
                wx:else
                class="gbs-btn-special-item"
            >
                <view
                    data-type="cart"
                    bindtap="toggleAnimate"
                    class="gbs-btn-special-item pink"
                >   
                    加入购物车
                </view>
                <view
                    data-type="buy"
                    bindtap="toggleAnimate"
                    class="gbs-btn-special-item morepink"
                >   
                    立即购买
                </view>
            </view>
            

        </view>
        
    </view>

    <!-- sku背景 -->
    <view
        bindtap="toggleAnimate"
        class="sku-bg {{ !openSku ? 'hide' : ''  }}"
        animation="{{ animationSkuBg }}"
    >
    </view>

    <!-- sku弹窗 -->
    <view
        class="sku-contaienr-bg"
        animation="{{ animationSku }}"
        catchtouchmove="preventTouchMove"
    >
        <view
            class="sku-container-block"
        >

            <!-- 关闭按钮 -->
            <view
                class="sku-close-btn"
            >
                <wxc-icon
                    size="40"
                    type="no"
                    color="#e8e8e8"
                    bindtap="toggleAnimate"
                />
            </view>

            <!-- 头部栏 图片、价格、库存 -->
            <view class="sku-header">

                <!-- 图片 -->
                <view class="sku-img-block" wx:if="{{ selectedSku }}">
                    <image
                        class="sku-img"
                        mode="aspectFill"
                        bindtap='previewImg'
                        src="{{ selectedSku.img }}"
                        data-img="{{ selectedSku.img }}"
                    />
                </view>

                <!-- 价格 -->
                <view class="sku-price-block" wx:if="{{ selectedSku }}">
                    <wxc-price
                        icon="sub"
                        decimal="small"
                        class="sku-price"
                    > 
                        {{ selectedSku.price }}
                    </wxc-price>
                    <view
                        class="sku-stock"
                        wx:if="{{ selectedSku.stock }}"
                    >
                        库存{{ selectedSku.stock }}件<text wx:if="{{ selectedSku.limit }}">，限购{{ selectedSku.limit }}件</text>
                    </view>
                    <view
                        class="sku-title"
                    >
                        已选择：{{ selectedSku.title }}
                    </view>
                </view>

            </view>

            <!-- 型号、购买数量 -->
            <scroll-view
                scroll-y
                class="sku-standards-and-buy-block"
            >

                <!-- 型号 -->
                <view class="sku-standards-block">
                    <view class="sku-info-title">
                        型号
                    </view>
                    <view class="sku-standards" wx:if="{{ selectedSku }}">
                        <view
                            wx:for="{{ skuItems }}"
                            wx:key="{{ index }}"
                            data-standard="{{ item }}"
                            bindtap="onSelectSku"
                            class="sku-standards-item {{ item.canSelect ? '' : 'out_select' }} {{ item._id === selectedSku._id ? 'selecting' : '' }} "
                        >
                            {{ item.title }}
                        </view>
                    </view>
                </view>

                <!-- 购买数量 -->
                <view class="sku-count-block sku-standards-block">
                    <view class="sku-info-title sku-count-title">
                        购买数量
                    </view>
                    <wxc-counter
                        min="{{ 1 }}"
                        number="{{ selectdSkuCount }}"
                        max="{{ selectedSku.limit || selectedSku.stock || 99999999 }}"
                        bind:changenumber="onSkuCount"
                    />
                </view>
                

            </scroll-view>

            <!-- 确认按钮 -->
            <view class="sku-btn-block">
                <view
                    class="sku-btn"
                    bindtap="confirmSelect"
                >   
                    确定
                </view>  
            </view>

        </view>

    </view>

</view>
