<!--app/pages/goods-detail/index.wxml-->
<view class="page-goods-detail"> 

    <!-- 加载栏 -->
    <view
        class="pgd-tips-skt"
        wx:if="{{ loading }}"
    >
        <view class="text">正在加载...</view> 
    </view>

    <!-- 内容 -->
    <view
        wx:else
    >
        
        <!-- 轮播图 -->
        <swiper
            autoplay="{{ true }}"
            interval="{{ 5000 }}"
            circular="{{ true }}"
            class="pgd-swiper"
        >
            <block
                wx:if="{{ detail }}"
                wx:key="{{ index }}"
                wx:for="{{ detail.img }}"
            >
                <swiper-item>
                    <image
                        mode="widthFix"
                        src="{{ item }}"
                        data-img="{{ item }}"
                        class="pgd-swiper-img"
                        bindtap='previewImg'
                    />
                </swiper-item>
            </block>
        </swiper>

        <!-- v1 - 标题 -->
        <view
            class="pgd-title"
            wx:if="{{ detail }}"
        >
            {{ detail.title }}
        </view>

        <!-- v1 - 价格 -->
        <view class="padding">
            <wxc-price
                icon="sub"
                class="red price price-item"
                decimal="small"
                wx:if="{{ detail }}"
            > 
                {{ price }}
            </wxc-price>
            <wxc-price
                status="del"
                decimal="small"
                del-color="#666"
                wx:if="{{ detail }}"
                class="fade-price price-item"
            > 
                原价{{ detail.fadePrice }}
            </wxc-price>
        </view>

        <!-- v1 - 标签 -->
        <view
            wx:if="{{ detail }}"
            class="pgd-tag-block padding"
            bindtap="onLike"
        >
            <wxc-label
                class="pgd-label"
                text="{{ item }}"
                wx:key="{{ index }}"
                wx:for="{{ detail.tag }}"
            />

            <view class="pgd-like">
                <i-icon
                    size="20"
                    type="{{ liked ? 'like_fill' : 'like' }}"
                    color="#ff5777"
                />喜欢
            </view>
        </view>

        <!-- 分割线 -->
        <view class="drive-line mt"></view>

        <!-- 团购信息、基本保证 -->
        <view
            class="info-block"
        >

            <view class="info-block-item" wx:if="{{ priceGap }}">

                <view class="info-block-item-label">
                    团购：
                </view>

                <view class="info-block-item-content">
                    一趟行程中，只要有人下单，<text class="red">自动减{{ priceGap }}元</text>
                </view>

            </view>

            <view class="info-block-item">

                <view class="info-block-item-label">
                    保证：
                </view>

                <view class="info-block-item-content">
                    <view
                        wx:for="{{ promiseTips }}"
                        wx:key="{{ index }}"
                        class="info-block-item-tips"
                    >
                        <image
                            class="info-block-item-tips-image"
                            src="cloud://dev-0822cd.6465-dev-0822cd/icon-img/right-icon.png"
                        />
                        {{ item }}
                    </view>
                </view>
                
            </view>

        </view>

        <!-- 分割线 -->
        <view class="drive-line"></view>

        <!-- 文字介绍 -->
        <view class="text-info-block" wx:if="{{ detail }}">
            <view
                wx:key="{{ index }}"
                class="text-info-item"
                wx:for="{{ detailIntro }}"
            >
                {{ item }}
            </view>
        </view>

        <!-- 商品下面的栏 -->
        <my-goods-detail-bar
            pid="{{ id }}"
        />

    </view> 

</view>
