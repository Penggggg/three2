"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var http_1 = require("./http");
exports.createOrders = function (tid, targetBuys, from, successCB, errorCB) {
    http_1.http({
        data: {
            from: from,
            tid: tid,
            list: targetBuys
        },
        loadingMsg: '结算中...',
        url: "shopping-list_findCannotBuy",
        success: function (res) {
            var status = res.status, data = res.data;
            if (status !== 200) {
                return;
            }
            var hasBeenBuy = data.hasBeenBuy, cannotBuy = data.cannotBuy, hasBeenDelete = data.hasBeenDelete, lowStock = data.lowStock, orders = data.orders;
            if (cannotBuy.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: "\u706B\u7206\uFF01" + cannotBuy.map(function (x) { return "" + x.goodName + x.standardName; }).join('、') + "\u6682\u65F6\u65E0\u8D27\uFF01"
                });
            }
            if (hasBeenDelete.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: hasBeenDelete.map(function (x) { return "" + x.goodName + x.standerName; }).join('、') + "\u5DF2\u88AB\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (lowStock.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: lowStock.map(function (x) { return "" + x.goodName + x.standerName; }).join('、') + "\u8D27\u5B58\u4E0D\u8DB3\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (hasBeenBuy.length > 0) {
                wx.showModal({
                    title: '提示',
                    content: "\u7FA4\u4E3B\u5DF2\u7ECF\u4E70\u4E86" + hasBeenBuy.map(function (x) { return "" + x.goodName + x.standardName; }).join('、') + "\uFF0C\u4E0D\u4E00\u5B9A\u4F1A\u8FD4\u7A0B\u8D2D\u4E70\uFF0C\u8BF7\u8054\u7CFB\u7FA4\u4E3B\uFF01"
                });
            }
            if (orders.length === 0) {
                return;
            }
            successCB && successCB(orders);
        },
        error: function () {
            errorCB && errorCB();
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJvcmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUE4QjtBQTRCakIsUUFBQSxZQUFZLEdBQUcsVUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTztJQUNuRSxXQUFJLENBQUM7UUFDRCxJQUFJLEVBQUU7WUFDRixJQUFJLE1BQUE7WUFDSixHQUFHLEVBQUUsR0FBRztZQUNSLElBQUksRUFBRSxVQUFVO1NBQ25CO1FBQ0QsVUFBVSxFQUFFLFFBQVE7UUFDcEIsR0FBRyxFQUFFLDZCQUE2QjtRQUNsQyxPQUFPLEVBQUUsVUFBQSxHQUFHO1lBQ0EsSUFBQSxtQkFBTSxFQUFFLGVBQUksQ0FBUztZQUM3QixJQUFLLE1BQU0sS0FBSyxHQUFHLEVBQUc7Z0JBQUUsT0FBTzthQUFFO1lBRXpCLElBQUEsNEJBQVUsRUFBRSwwQkFBUyxFQUFFLGtDQUFhLEVBQUUsd0JBQVEsRUFBRSxvQkFBTSxDQUFVO1lBR3hFLElBQUssU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUc7Z0JBQ3hCLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDaEIsS0FBSyxFQUFFLElBQUk7b0JBQ1gsT0FBTyxFQUFFLHVCQUFNLFNBQVMsQ0FBQyxHQUFHLENBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFHLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFlBQWMsRUFBaEMsQ0FBZ0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsbUNBQU87aUJBQ3hGLENBQUMsQ0FBQzthQUNOO1lBR0QsSUFBSyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRztnQkFDNUIsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNoQixLQUFLLEVBQUUsSUFBSTtvQkFDWCxPQUFPLEVBQUssYUFBYSxDQUFDLEdBQUcsQ0FBRSxVQUFBLENBQUMsSUFBSSxPQUFBLEtBQUcsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsV0FBYSxFQUEvQixDQUErQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyx1RUFBYTtpQkFDOUYsQ0FBQyxDQUFDO2FBQ047WUFHRCxJQUFLLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFHO2dCQUN2QixPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ2hCLEtBQUssRUFBRSxJQUFJO29CQUNYLE9BQU8sRUFBSyxRQUFRLENBQUMsR0FBRyxDQUFFLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBRyxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxXQUFhLEVBQS9CLENBQStCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLHVFQUFhO2lCQUN6RixDQUFDLENBQUM7YUFDTjtZQU1ELElBQUssVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUc7Z0JBQ3pCLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ1QsS0FBSyxFQUFFLElBQUk7b0JBQ1gsT0FBTyxFQUFFLHlDQUFTLFVBQVUsQ0FBQyxHQUFHLENBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFHLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFlBQWMsRUFBaEMsQ0FBZ0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMscUdBQWtCO2lCQUN2RyxDQUFDLENBQUM7YUFDTjtZQUVELElBQUssTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUc7Z0JBQUUsT0FBTzthQUFFO1lBRXRDLFNBQVMsSUFBSSxTQUFTLENBQUUsTUFBTSxDQUFFLENBQUM7UUFFckMsQ0FBQztRQUNELEtBQUssRUFBRTtZQUNILE9BQU8sSUFBSSxPQUFPLEVBQUcsQ0FBQztRQUMxQixDQUFDO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4vaHR0cCc7XG5cbi8qKlxuICogXG4gKiBAcGFyYW0gdGlkIOihjOeoi2lkXG4gKiBAcGFyYW0gZnJvbSDorqLljZXmnaXmupBcbiAqIEBwYXJhbSB0YXJnZXRCdXlzIOmihOS7mOiuouWNleWIl+ihqFxuICoge1xuICAgICAgICBzaWQsXG4gICAgICAgIHBpZCxcbiAgICAgICAgY291bnQsXG4gICAgICAgIHByaWNlLFxuICAgICAgICBpbWc6IFsgaW1nIF0sXG4gICAgICAgIGdyb3VwUHJpY2UsXG4gICAgICAgIHRpZDogdHJpcC5faWQsXG4gICAgICAgIGRlcG9zaXRQcmljZTogZGVwb3NpdFByaWNlIHx8IDAsXG4gICAgICAgIHR5cGU6ICdwcmUnLCAvLyDpooTku5jnsbvlnovorqLljZXvvIxcbiAgKiAgICAgICFjaWQ/OiB0ZW1wLmNhcnQuX2lkLFxuICAgICAgICBuYW1lOiBgJHt0aXRsZX1gLFxuICAgICAgICBzdGFuZGVybmFtZTogc3RhbmRhcmROYW1lLFxuICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlck5hbWUsXG4gICAgICAgICAgICBwb3N0YWxjb2RlOiBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgcGhvbmU6IHRlbE51bWJlcixcbiAgICAgICAgICAgIGFkZHJlc3M6IGAke3Byb3ZpbmNlTmFtZX0ke2NpdHlOYW1lfSR7Y291bnR5TmFtZX0ke2RldGFpbEluZm99YFxuICAgICAgICB9XG4gKiB9WyBdXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVPcmRlcnMgPSAoIHRpZCwgdGFyZ2V0QnV5cywgZnJvbSwgc3VjY2Vzc0NCLCBlcnJvckNCICkgPT4ge1xuICAgIGh0dHAoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdGlkOiB0aWQsXG4gICAgICAgICAgICBsaXN0OiB0YXJnZXRCdXlzXG4gICAgICAgIH0sXG4gICAgICAgIGxvYWRpbmdNc2c6ICfnu5PnrpfkuK0uLi4nLFxuICAgICAgICB1cmw6IGBzaG9wcGluZy1saXN0X2ZpbmRDYW5ub3RCdXlgLFxuICAgICAgICBzdWNjZXNzOiByZXMgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0dXMsIGRhdGEgfSA9IHJlcztcbiAgICAgICAgICAgIGlmICggc3RhdHVzICE9PSAyMDAgKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICBjb25zdCB7IGhhc0JlZW5CdXksIGNhbm5vdEJ1eSwgaGFzQmVlbkRlbGV0ZSwgbG93U3RvY2ssIG9yZGVycyB9ID0gZGF0YTtcbiAgICAgIFxuICAgICAgICAgICAgLyoqIOaPkOekuuihjOeoi+aXoOi0pyAqL1xuICAgICAgICAgICAgaWYgKCBjYW5ub3RCdXkubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBg54Gr54iG77yBJHtjYW5ub3RCdXkubWFwKCB4ID0+IGAke3guZ29vZE5hbWV9JHt4LnN0YW5kYXJkTmFtZX1gKS5qb2luKCfjgIEnKX3mmoLml7bml6DotKfvvIFgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiDllYblk4HooqvliKDpmaQgKi9cbiAgICAgICAgICAgIGlmICggaGFzQmVlbkRlbGV0ZS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2hhc0JlZW5EZWxldGUubWFwKCB4ID0+IGAke3guZ29vZE5hbWV9JHt4LnN0YW5kZXJOYW1lfWApLmpvaW4oJ+OAgScpfeW3suiiq+WIoOmZpO+8jOivt+mHjeaWsOmAieaLqe+8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIOaPkOekuuS9juW6k+WtmCAqL1xuICAgICAgICAgICAgaWYgKCBsb3dTdG9jay5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2xvd1N0b2NrLm1hcCggeCA9PiBgJHt4Lmdvb2ROYW1lfSR7eC5zdGFuZGVyTmFtZX1gKS5qb2luKCfjgIEnKX3otKflrZjkuI3otrPvvIzor7fph43mlrDpgInmi6nvvIFgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiBcbiAgICAgICAgICAgICAqIOW3sue7j+i0reS5sOWwsei/m+ihjOaPkOekulxuICAgICAgICAgICAgICog5L2G5piv5L6d54S25Y+v5Lul57un57ut6LSt5LmwXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICggaGFzQmVlbkJ1eS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYOe+pOS4u+W3sue7j+S5sOS6hiR7aGFzQmVlbkJ1eS5tYXAoIHggPT4gYCR7eC5nb29kTmFtZX0ke3guc3RhbmRhcmROYW1lfWApLmpvaW4oJ+OAgScpfe+8jOS4jeS4gOWumuS8mui/lOeoi+i0reS5sO+8jOivt+iBlOezu+e+pOS4u++8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCBvcmRlcnMubGVuZ3RoID09PSAwICkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgc3VjY2Vzc0NCICYmIHN1Y2Nlc3NDQiggb3JkZXJzICk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6ICggKSA9PiB7XG4gICAgICAgICAgICBlcnJvckNCICYmIGVycm9yQ0IoICk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iXX0=