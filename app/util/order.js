"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var http_1 = require("./http");
exports.createOrders = function (tid, targetBuys, from, successCB, errorCB) {
    http_1.http({
        data: {
            from: from,
            tid: tid,
            list: targetBuys
        },
        loadingMsg: '结算中...',
        url: "shopping-list_findCannotBuy",
        success: function (res) {
            var status = res.status, data = res.data;
            if (status !== 200) {
                return;
            }
            var hasBeenBuy = data.hasBeenBuy, cannotBuy = data.cannotBuy, hasBeenDelete = data.hasBeenDelete, lowStock = data.lowStock, orders = data.orders;
            if (cannotBuy.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: "\u706B\u7206\uFF01" + cannotBuy.map(function (x) { return "" + (x.goodName || x.name) + (x.standername !== '默认型号' ? '-' + x.standername : ''); }).join('、') + "\u6682\u65F6\u65E0\u8D27\uFF01"
                });
            }
            if (hasBeenDelete.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: hasBeenDelete.map(function (x) { return "" + (x.goodName || x.name) + (x.standername !== '默认型号' ? '-' + x.standername : ''); }).join('、') + "\u5DF2\u88AB\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (lowStock.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: lowStock.map(function (x) { return "" + (x.goodName || x.name) + (x.standername !== '默认型号' ? '-' + x.standername : ''); }).join('、') + "\u8D27\u5B58\u4E0D\u8DB3\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (hasBeenBuy.length > 0) {
                wx.showModal({
                    title: '提示',
                    content: "\u7FA4\u4E3B\u5DF2\u7ECF\u4E70\u4E86" + hasBeenBuy.map(function (x) { return "" + x.goodName + x.standardName; }).join('、') + "\uFF0C\u4E0D\u4E00\u5B9A\u4F1A\u8FD4\u7A0B\u8D2D\u4E70\uFF0C\u8BF7\u8054\u7CFB\u7FA4\u4E3B\uFF01"
                });
            }
            if (orders.length === 0) {
                return;
            }
            successCB && successCB(orders);
        },
        error: function () {
            errorCB && errorCB();
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJvcmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUE4QjtBQTZCakIsUUFBQSxZQUFZLEdBQUcsVUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTztJQUNuRSxXQUFJLENBQUM7UUFDRCxJQUFJLEVBQUU7WUFDRixJQUFJLE1BQUE7WUFDSixHQUFHLEVBQUUsR0FBRztZQUNSLElBQUksRUFBRSxVQUFVO1NBQ25CO1FBQ0QsVUFBVSxFQUFFLFFBQVE7UUFDcEIsR0FBRyxFQUFFLDZCQUE2QjtRQUNsQyxPQUFPLEVBQUUsVUFBQSxHQUFHO1lBQ0EsSUFBQSxtQkFBTSxFQUFFLGVBQUksQ0FBUztZQUM3QixJQUFLLE1BQU0sS0FBSyxHQUFHLEVBQUc7Z0JBQUUsT0FBTzthQUFFO1lBRXpCLElBQUEsNEJBQVUsRUFBRSwwQkFBUyxFQUFFLGtDQUFhLEVBQUUsd0JBQVEsRUFBRSxvQkFBTSxDQUFVO1lBR3hFLElBQUssU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUc7Z0JBQ3hCLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDaEIsS0FBSyxFQUFFLElBQUk7b0JBQ1gsT0FBTyxFQUFFLHVCQUFNLFNBQVMsQ0FBQyxHQUFHLENBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxNQUFHLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLElBQUksS0FBRyxDQUFDLENBQUMsV0FBVyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBRSxFQUEvRSxDQUErRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQ0FBTztpQkFDdkksQ0FBQyxDQUFDO2FBQ047WUFHRCxJQUFLLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFHO2dCQUM1QixPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ2hCLEtBQUssRUFBRSxJQUFJO29CQUNYLE9BQU8sRUFBSyxhQUFhLENBQUMsR0FBRyxDQUFFLFVBQUEsQ0FBQyxJQUFJLE9BQUEsTUFBRyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUcsQ0FBQyxDQUFDLFdBQVcsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUUsRUFBL0UsQ0FBK0UsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsdUVBQWE7aUJBQzlJLENBQUMsQ0FBQzthQUNOO1lBR0QsSUFBSyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRztnQkFDdkIsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNoQixLQUFLLEVBQUUsSUFBSTtvQkFDWCxPQUFPLEVBQUssUUFBUSxDQUFDLEdBQUcsQ0FBRSxVQUFBLENBQUMsSUFBSSxPQUFBLE1BQUcsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFHLENBQUMsQ0FBQyxXQUFXLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFFLEVBQS9FLENBQStFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLHVFQUFhO2lCQUN6SSxDQUFDLENBQUM7YUFDTjtZQU1ELElBQUssVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUc7Z0JBQ3pCLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ1QsS0FBSyxFQUFFLElBQUk7b0JBQ1gsT0FBTyxFQUFFLHlDQUFTLFVBQVUsQ0FBQyxHQUFHLENBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFHLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFlBQWMsRUFBaEMsQ0FBZ0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMscUdBQWtCO2lCQUN2RyxDQUFDLENBQUM7YUFDTjtZQUVELElBQUssTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUc7Z0JBQUUsT0FBTzthQUFFO1lBRXRDLFNBQVMsSUFBSSxTQUFTLENBQUUsTUFBTSxDQUFFLENBQUM7UUFFckMsQ0FBQztRQUNELEtBQUssRUFBRTtZQUNILE9BQU8sSUFBSSxPQUFPLEVBQUcsQ0FBQztRQUMxQixDQUFDO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4vaHR0cCc7XG5cbi8qKlxuICogXG4gKiBAcGFyYW0gdGlkIOihjOeoi2lkXG4gKiBAcGFyYW0gZnJvbSDorqLljZXmnaXmupAgJ2J1eScgfCBcbiAqIEBwYXJhbSB0YXJnZXRCdXlzIOmihOS7mOiuouWNleWIl+ihqO+8jOaVsOaNrue7k+aehOWmguS4i1xuICoge1xuICAgICAgICBzaWQsXG4gICAgICAgIHBpZCxcbiAgICAgICAgY291bnQsXG4gICAgICAgIHByaWNlLFxuICAgICAgICBpbWc6IFsgaW1nIF0sXG4gICAgICAgIGdyb3VwUHJpY2UsXG4gICAgICAgIHRpZDogdHJpcC5faWQsXG4gICAgICAgIGRlcG9zaXRQcmljZTogZGVwb3NpdFByaWNlIHx8IDAsXG4gKiEgICAgIGFjaWQ6IOS4gOWPo+S7t+a0u+WKqOeahGlk77yM5Y+v5pegXG4gICAgICAgIHR5cGU6ICdwcmUnLCAvLyDpooTku5jnsbvlnovorqLljZXvvIxcbiAqISAgICAgY2lkPzogdGVtcC5jYXJ0Ll9pZCxcbiAgICAgICAgbmFtZTogYCR7dGl0bGV9YCxcbiAgICAgICAgc3RhbmRlcm5hbWU6IHN0YW5kYXJkTmFtZSxcbiAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgICAgcG9zdGFsY29kZTogcG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHBob25lOiB0ZWxOdW1iZXIsXG4gICAgICAgICAgICBhZGRyZXNzOiBgJHtwcm92aW5jZU5hbWV9JHtjaXR5TmFtZX0ke2NvdW50eU5hbWV9JHtkZXRhaWxJbmZvfWBcbiAgICAgICAgfVxuICogfVsgXVxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlT3JkZXJzID0gKCB0aWQsIHRhcmdldEJ1eXMsIGZyb20sIHN1Y2Nlc3NDQiwgZXJyb3JDQiApID0+IHtcbiAgICBodHRwKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRpZDogdGlkLFxuICAgICAgICAgICAgbGlzdDogdGFyZ2V0QnV5c1xuICAgICAgICB9LFxuICAgICAgICBsb2FkaW5nTXNnOiAn57uT566X5LitLi4uJyxcbiAgICAgICAgdXJsOiBgc2hvcHBpbmctbGlzdF9maW5kQ2Fubm90QnV5YCxcbiAgICAgICAgc3VjY2VzczogcmVzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSByZXM7XG4gICAgICAgICAgICBpZiAoIHN0YXR1cyAhPT0gMjAwICkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgY29uc3QgeyBoYXNCZWVuQnV5LCBjYW5ub3RCdXksIGhhc0JlZW5EZWxldGUsIGxvd1N0b2NrLCBvcmRlcnMgfSA9IGRhdGE7XG4gICAgICBcbiAgICAgICAgICAgIC8qKiDmj5DnpLrooYznqIvml6DotKcgKi9cbiAgICAgICAgICAgIGlmICggY2Fubm90QnV5Lmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYOeBq+eIhu+8gSR7Y2Fubm90QnV5Lm1hcCggeCA9PiBgJHt4Lmdvb2ROYW1lIHx8IHgubmFtZX0ke3guc3RhbmRlcm5hbWUgIT09ICfpu5jorqTlnovlj7cnID8gJy0nICsgeC5zdGFuZGVybmFtZSA6ICcnfWApLmpvaW4oJ+OAgScpfeaaguaXtuaXoOi0p++8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIOWVhuWTgeiiq+WIoOmZpCAqL1xuICAgICAgICAgICAgaWYgKCBoYXNCZWVuRGVsZXRlLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7aGFzQmVlbkRlbGV0ZS5tYXAoIHggPT4gYCR7eC5nb29kTmFtZSB8fCB4Lm5hbWV9JHt4LnN0YW5kZXJuYW1lICE9PSAn6buY6K6k5Z6L5Y+3JyA/ICctJyArIHguc3RhbmRlcm5hbWUgOiAnJ31gKS5qb2luKCfjgIEnKX3lt7LooqvliKDpmaTvvIzor7fph43mlrDpgInmi6nvvIFgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiDmj5DnpLrkvY7lupPlrZggKi9cbiAgICAgICAgICAgIGlmICggbG93U3RvY2subGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgJHtsb3dTdG9jay5tYXAoIHggPT4gYCR7eC5nb29kTmFtZSB8fCB4Lm5hbWV9JHt4LnN0YW5kZXJuYW1lICE9PSAn6buY6K6k5Z6L5Y+3JyA/ICctJyArIHguc3RhbmRlcm5hbWUgOiAnJ31gKS5qb2luKCfjgIEnKX3otKflrZjkuI3otrPvvIzor7fph43mlrDpgInmi6nvvIFgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiBcbiAgICAgICAgICAgICAqIOW3sue7j+i0reS5sOWwsei/m+ihjOaPkOekulxuICAgICAgICAgICAgICog5L2G5piv5L6d54S25Y+v5Lul57un57ut6LSt5LmwXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICggaGFzQmVlbkJ1eS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYOe+pOS4u+W3sue7j+S5sOS6hiR7aGFzQmVlbkJ1eS5tYXAoIHggPT4gYCR7eC5nb29kTmFtZX0ke3guc3RhbmRhcmROYW1lfWApLmpvaW4oJ+OAgScpfe+8jOS4jeS4gOWumuS8mui/lOeoi+i0reS5sO+8jOivt+iBlOezu+e+pOS4u++8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCBvcmRlcnMubGVuZ3RoID09PSAwICkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgc3VjY2Vzc0NCICYmIHN1Y2Nlc3NDQiggb3JkZXJzICk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6ICggKSA9PiB7XG4gICAgICAgICAgICBlcnJvckNCICYmIGVycm9yQ0IoICk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iXX0=