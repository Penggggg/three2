"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var http_1 = require("./http");
exports.createOrders = function (tid, targetBuys, successCB, errorCB) {
    http_1.http({
        data: {
            tid: tid,
            list: targetBuys
        },
        loadingMsg: '结算中...',
        url: "shopping-list_findCannotBuy",
        success: function (res) {
            var status = res.status, data = res.data;
            if (status !== 200) {
                return;
            }
            var hasBeenBuy = data.hasBeenBuy, cannotBuy = data.cannotBuy, hasBeenDelete = data.hasBeenDelete, lowStock = data.lowStock, orders = data.orders;
            if (cannotBuy.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: "\u706B\u7206\uFF01" + cannotBuy.map(function (x) { return "" + x.goodName + x.standardName; }).join('、') + "\u6682\u65F6\u65E0\u8D27\uFF01"
                });
            }
            if (hasBeenDelete.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: hasBeenDelete.map(function (x) { return "" + x.goodName + x.standerName; }).join('、') + "\u5DF2\u88AB\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (lowStock.length > 0) {
                return wx.showModal({
                    title: '提示',
                    content: lowStock.map(function (x) { return "" + x.goodName + x.standerName; }).join('、') + "\u8D27\u5B58\u4E0D\u8DB3\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\uFF01"
                });
            }
            if (hasBeenBuy.length > 0) {
                wx.showModal({
                    title: '提示',
                    content: "\u7FA4\u4E3B\u5DF2\u7ECF\u4E70\u4E86" + hasBeenBuy.map(function (x) { return "" + x.goodName + x.standardName; }).join('、') + "\uFF0C\u4E0D\u4E00\u5B9A\u4F1A\u8FD4\u7A0B\u8D2D\u4E70\uFF0C\u8BF7\u8054\u7CFB\u7FA4\u4E3B\uFF01"
                });
            }
            if (orders.length === 0) {
                return;
            }
            successCB && successCB(orders);
        },
        error: function () {
            errorCB && errorCB();
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJvcmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUE4QjtBQTJCakIsUUFBQSxZQUFZLEdBQUcsVUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxPQUFPO0lBQzdELFdBQUksQ0FBQztRQUNELElBQUksRUFBRTtZQUNGLEdBQUcsRUFBRSxHQUFHO1lBQ1IsSUFBSSxFQUFFLFVBQVU7U0FDbkI7UUFDRCxVQUFVLEVBQUUsUUFBUTtRQUNwQixHQUFHLEVBQUUsNkJBQTZCO1FBQ2xDLE9BQU8sRUFBRSxVQUFBLEdBQUc7WUFDQSxJQUFBLG1CQUFNLEVBQUUsZUFBSSxDQUFTO1lBQzdCLElBQUssTUFBTSxLQUFLLEdBQUcsRUFBRztnQkFBRSxPQUFPO2FBQUU7WUFFekIsSUFBQSw0QkFBVSxFQUFFLDBCQUFTLEVBQUUsa0NBQWEsRUFBRSx3QkFBUSxFQUFFLG9CQUFNLENBQVU7WUFHeEUsSUFBSyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRztnQkFDeEIsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNoQixLQUFLLEVBQUUsSUFBSTtvQkFDWCxPQUFPLEVBQUUsdUJBQU0sU0FBUyxDQUFDLEdBQUcsQ0FBRSxVQUFBLENBQUMsSUFBSSxPQUFBLEtBQUcsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsWUFBYyxFQUFoQyxDQUFnQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQ0FBTztpQkFDeEYsQ0FBQyxDQUFDO2FBQ047WUFHRCxJQUFLLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFHO2dCQUM1QixPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ2hCLEtBQUssRUFBRSxJQUFJO29CQUNYLE9BQU8sRUFBSyxhQUFhLENBQUMsR0FBRyxDQUFFLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBRyxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxXQUFhLEVBQS9CLENBQStCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLHVFQUFhO2lCQUM5RixDQUFDLENBQUM7YUFDTjtZQUdELElBQUssUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUc7Z0JBQ3ZCLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDaEIsS0FBSyxFQUFFLElBQUk7b0JBQ1gsT0FBTyxFQUFLLFFBQVEsQ0FBQyxHQUFHLENBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxLQUFHLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLFdBQWEsRUFBL0IsQ0FBK0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsdUVBQWE7aUJBQ3pGLENBQUMsQ0FBQzthQUNOO1lBTUQsSUFBSyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRztnQkFDekIsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDVCxLQUFLLEVBQUUsSUFBSTtvQkFDWCxPQUFPLEVBQUUseUNBQVMsVUFBVSxDQUFDLEdBQUcsQ0FBRSxVQUFBLENBQUMsSUFBSSxPQUFBLEtBQUcsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsWUFBYyxFQUFoQyxDQUFnQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxxR0FBa0I7aUJBQ3ZHLENBQUMsQ0FBQzthQUNOO1lBRUQsSUFBSyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRztnQkFBRSxPQUFPO2FBQUU7WUFFdEMsU0FBUyxJQUFJLFNBQVMsQ0FBRSxNQUFNLENBQUUsQ0FBQztRQUVyQyxDQUFDO1FBQ0QsS0FBSyxFQUFFO1lBQ0gsT0FBTyxJQUFJLE9BQU8sRUFBRyxDQUFDO1FBQzFCLENBQUM7S0FDSixDQUFDLENBQUM7QUFDUCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBodHRwIH0gZnJvbSAnLi9odHRwJztcblxuLyoqXG4gKiBcbiAqIEBwYXJhbSB0aWQg6KGM56iLaWRcbiAqIEBwYXJhbSB0YXJnZXRCdXlzIOmihOS7mOiuouWNleWIl+ihqFxuICoge1xuICAgICAgICBzaWQsXG4gICAgICAgIHBpZCxcbiAgICAgICAgY291bnQsXG4gICAgICAgIHByaWNlLFxuICAgICAgICBpbWc6IFsgaW1nIF0sXG4gICAgICAgIGdyb3VwUHJpY2UsXG4gICAgICAgIHRpZDogdHJpcC5faWQsXG4gICAgICAgIGRlcG9zaXRQcmljZTogZGVwb3NpdFByaWNlIHx8IDAsXG4gICAgICAgIHR5cGU6ICdwcmUnLCAvLyDpooTku5jnsbvlnovorqLljZXvvIxcbiAgKiAgICAgICFjaWQ/OiB0ZW1wLmNhcnQuX2lkLFxuICAgICAgICBuYW1lOiBgJHt0aXRsZX1gLFxuICAgICAgICBzdGFuZGVybmFtZTogc3RhbmRhcmROYW1lLFxuICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlck5hbWUsXG4gICAgICAgICAgICBwb3N0YWxjb2RlOiBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgcGhvbmU6IHRlbE51bWJlcixcbiAgICAgICAgICAgIGFkZHJlc3M6IGAke3Byb3ZpbmNlTmFtZX0ke2NpdHlOYW1lfSR7Y291bnR5TmFtZX0ke2RldGFpbEluZm99YFxuICAgICAgICB9XG4gKiB9WyBdXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVPcmRlcnMgPSAoIHRpZCwgdGFyZ2V0QnV5cywgc3VjY2Vzc0NCLCBlcnJvckNCICkgPT4ge1xuICAgIGh0dHAoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0aWQ6IHRpZCxcbiAgICAgICAgICAgIGxpc3Q6IHRhcmdldEJ1eXNcbiAgICAgICAgfSxcbiAgICAgICAgbG9hZGluZ01zZzogJ+e7k+eul+S4rS4uLicsXG4gICAgICAgIHVybDogYHNob3BwaW5nLWxpc3RfZmluZENhbm5vdEJ1eWAsXG4gICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHN0YXR1cywgZGF0YSB9ID0gcmVzO1xuICAgICAgICAgICAgaWYgKCBzdGF0dXMgIT09IDIwMCApIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgaGFzQmVlbkJ1eSwgY2Fubm90QnV5LCBoYXNCZWVuRGVsZXRlLCBsb3dTdG9jaywgb3JkZXJzIH0gPSBkYXRhO1xuXG4gICAgICAgICAgICAvKiog5o+Q56S66KGM56iL5peg6LSnICovXG4gICAgICAgICAgICBpZiAoIGNhbm5vdEJ1eS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGDngavniIbvvIEke2Nhbm5vdEJ1eS5tYXAoIHggPT4gYCR7eC5nb29kTmFtZX0ke3guc3RhbmRhcmROYW1lfWApLmpvaW4oJ+OAgScpfeaaguaXtuaXoOi0p++8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIOWVhuWTgeiiq+WIoOmZpCAqL1xuICAgICAgICAgICAgaWYgKCBoYXNCZWVuRGVsZXRlLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7aGFzQmVlbkRlbGV0ZS5tYXAoIHggPT4gYCR7eC5nb29kTmFtZX0ke3guc3RhbmRlck5hbWV9YCkuam9pbign44CBJyl95bey6KKr5Yig6Zmk77yM6K+36YeN5paw6YCJ5oup77yBYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiog5o+Q56S65L2O5bqT5a2YICovXG4gICAgICAgICAgICBpZiAoIGxvd1N0b2NrLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7bG93U3RvY2subWFwKCB4ID0+IGAke3guZ29vZE5hbWV9JHt4LnN0YW5kZXJOYW1lfWApLmpvaW4oJ+OAgScpfei0p+WtmOS4jei2s++8jOivt+mHjeaWsOmAieaLqe+8gWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIFxuICAgICAgICAgICAgICog5bey57uP6LSt5Lmw5bCx6L+b6KGM5o+Q56S6XG4gICAgICAgICAgICAgKiDkvYbmmK/kvp3nhLblj6/ku6Xnu6fnu63otK3kubBcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCBoYXNCZWVuQnV5Lmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBg576k5Li75bey57uP5Lmw5LqGJHtoYXNCZWVuQnV5Lm1hcCggeCA9PiBgJHt4Lmdvb2ROYW1lfSR7eC5zdGFuZGFyZE5hbWV9YCkuam9pbign44CBJyl977yM5LiN5LiA5a6a5Lya6L+U56iL6LSt5Lmw77yM6K+36IGU57O7576k5Li777yBYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIG9yZGVycy5sZW5ndGggPT09IDAgKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICBzdWNjZXNzQ0IgJiYgc3VjY2Vzc0NCKCBvcmRlcnMgKTtcblxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogKCApID0+IHtcbiAgICAgICAgICAgIGVycm9yQ0IgJiYgZXJyb3JDQiggKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSJdfQ==